<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<title>团队监测</title>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
<meta name="author" content="">
<meta name="description" content="">
<meta name="keywords" content="">
<link rel="stylesheet" href="../../resource/css/lib/bootstrap.min.css"/>
<link rel="stylesheet" href="../../resource/css/lib/ui-form.css"/>
<link rel="stylesheet" href="../../resource/css/lib/bootstrap-datetimepicker.min.css"/>
<link rel="stylesheet" href="../../resource/css/lib/swiper.min.css"/>
<link rel="stylesheet" href="../../resource/css/common.css"/>
<style>
	.swiper-pagination-bullet{
		width: 12px;
		height: 12px;
		border-radius: 12px;
		background-color: transparent;
		opacity: 1;
		border: 1px solid #2FDDA8;
	}
	.swiper-pagination-bullet-active{
		background-color: #2FDDA8;
	}
	.video-js{
		margin: 0 auto;
		width: 80%;
		height: 100%;
	}
	.table > thead > tr > th, .table > tbody > tr > th, .table > tfoot > tr > th, .table > thead > tr > td, .table > tbody > tr > td, .table > tfoot > tr > td{
		padding: 6px;
	}
	.hot-man:after{
		content: '';
		display: block;
		top: 0;
		left: 0;
		position: absolute;
		width: 100%;
		height: 100%;
		background-image: url(css/bg/zhezhao.png);
		background-size: 100% 100%;
	}
	.abHeader{
		width: 910px;	
	}
	.cs-mark{
		padding: 16px;
		right: 40px;
		bottom: 40px;
		position: absolute;
		color: #fff;
		font-size: 12px;
		background-color: #303845;
	}
	.cs-mark .ad{
		padding: 0 10px;
		width: 100%;
		line-height: 30px;
		border-top: 2px solid #3678D6;
		background-color: #232732;
	}
	.cs-mark .ad span{
		font-size: 14px;
	}
	.cs-mark .title{
		margin-top: 10px;
		padding: 0 10px;
		border-left: 2px solid #3678D6;
	}
	.cs-mark .num{
		font-size: 28px;
		border-bottom: 1px solid #4D5055;
	}
	.timeDiv{
		display: inline-block;
		color: #2a2ad4;
	}
	.timeCss{
		background-color: transparent;
		color: white;
		border: none;
		width:100px;
	}
	.searchBtn{
		font-size: 20px;
		height: 37px;
		line-height: 37px;
		width:90px;
		margin-left: 5px;
	}
	.searchInp{
		margin-top:3px;
		height:37px;
		line-height: 37px;
		width: 230px;
	}
	.showtableCss{
	background-color: #0A3168;
		top:300px;	
	}
	.showtableCss1{
		top: 86px;
		width: 94%;
		left: 3%;		
	}
	.showtableCss1 td{
		background-color: transparent;
		max-width: 250px;
		text-align: left;
		line-height: 80px;
	}
	.showtableCss td{
		background-color: transparent;
		max-width: 250px;
		text-align: left;
		line-height: 33px;
	}
	.layer{
		position: fixed;
		top: 0;
		left: 0;
		z-index: 99999;
		width: 100%;
		height: 100%;
		background-color: rgba(0,0,0,.4);
	}
	.layer .module{
		position: absolute;
		top: 50%;
		left: 50%;
		margin-left: -500px;
		margin-top: -375px;
		width: 1000px;
		height: 750px;
		background-color: #001937;
	}
	.layer .module-light{
	box-shadow: 0 0 20px #2874D6 inset;
	}
	.padnei{
		padding: 20px;
	}
	.layer .header{
		position: relative;
		height: 40px;
		text-align: left;
	}
	.table > tbody > tr > td{
		border:none;
	}
	.searchDiv{
		position: absolute;
		display: inline-block;
		top:26px;
		right:15%;
	}
.monitor-header .logo{
	width: 22%;
	height: auto;
}
/* 	.table-border td{ */
/* 		border-bottom: 1px solid #2F6DC2; */
/* 	} */
#toiletBuildListId tr{
	cursor: pointer;
}


	
	
</style>
</head>
<body>
<header class="monitor-header clearfix">
	<div class="col-zsr-3 clearfix">
		<img src="../../resource/images/logo.png" class="logo pull-left"/>
		<div class="title pull-left">团队明细</div>
	</div>
	<div class="col-zsr-7  addBtn" id="mainTab">
			<div class="btn btn-line" onclick="return alert('正在建设中...');">山西团态分析</div>
			<div class="btn btn-line" onclick="return alert('正在建设中...');">导游综合检测</div>
			<div class="btn btn-line" onclick="return alert('正在建设中...');">旅游奖励信息</div>
			<div class="btn btn-line  active">出境旅游团队监测</div>
			<div class="searchDiv">
				<div style="display: inline-block;float: right;"><input class="searchInp" placeholder="输入团队编号或名称查询"/>
					<div class="btn btn-icon searchBtn"><a><i class="icon iconfont" style="font-size: 20px">搜索</i></a></div>
				</div>
<!-- 				<div class="btn btn-icon searchBtn" style="height: 50px;line-height: 50px;width:150px;"> -->
<!-- 					<a><i class="icon iconfont" style="font-size: 20px">团队编号</i></a> -->
<!-- 				</div> -->
			</div>
	</div>
<div class="col-zsr-2">
	<div class="btn btn-icon"><a href="../index.html" title="首页"><i class="icon iconfont">&#xe613;</i></a></div>
	<div class="btn btn-icon"><a href="touristStatistic.html" title="返回"><img width="70%" src="../../resource/images/back.png"></a></div>
</div>
</header>
<section class="monitor-main viewactive">
	
	
	<div class="col-zsr-9 row-1 padtwo">
		<!--客源地路线图-->
		<div class="module module-light">
			<div class="man" id="mapContainer"></div>
			<div class="showtableCss dialog-table" style="display:none;">
				<table id="mapResStatistics">
					<tr><td >团队编号</td><td id="tablebianhao">DNY52919</td></tr>
					<tr><td >线路名称</td><td id="tablename">新加坡马来西亚新欢唱之旅</td></tr>
					<tr><td >团队类型</td><td id="tabletype">企业团</td></tr>
					<tr><td >领队</td><td><a id="details" style="cursor: pointer;">点击查看详情</a></td></tr>
					<tr><td >接团日</td><td id="tabletime">20170821</td></tr>
					<tr><td >行程时间</td><td >五天四晚</td></tr>
					<tr><td >旅行社</td><td >XX旅行社</td></tr>
					<tr><td >目的地</td><td >东南亚 新加坡 马来西亚</td></tr>
					<tr><td >线路详情</td><td >搭乘国泰港龙航空公司豪华客机飞往香港，后经..</td></tr> 
				</table>
			</div>
			
			<header class="abHeader">
				<div class="btn-title">
					<div class="btn"  style="color:#5aa0ff;text-shadow: none;">
						<i class="icon iconfont">&#xe600;</i>目的地线路图
					</div>
				</div>
			</header>
			<!-- <div class="cs-mark">
				<div class="ad">目的地：<span>南京</span></div>
				<div class="title">旅游热度：</div>
				<div class="num">3,156</div>
			</div> -->
		</div>
	</div>
	<div class="col-zsr-3 row-1 activePlot padleft">
		<!--组团人次旅行社TOP10-->
		<div class="row-2 padbot tab">
			<div class="module module-bot padnei">
				<div class="plot-footer2" style="padding-bottom: 0px">
					<section class="plot-header">
						<header>
							<div class="btn-title">
								<div class="btn">
									<i class="icon iconfont">&#xe615;</i>接团信息统计
								</div>
							</div>
						</header>
						<section class="vertical">
							<div class="man">
								<table class="table">
									<thead>
										<tr>
											<th>团号</th>
											<th>线图</th>
											<th>接团日</th>
											<th>行程天</th>
											<th>类别</th>
										</tr>
									</thead>
									<tbody id="toiletBuildListId">
										<tr ><td>DNY52919</td><td>新加坡..</td><td>20170531</td><td>1</td><td></td></tr>
										<tr ><td>DNY52920</td><td>巴厘岛..</td><td>20170531</td><td>1</td><td></td></tr>
										<tr><td>DNY52921</td><td>美国七..</td><td>20170531</td><td>1</td><td></td></tr>
										<tr><td>DNY52922</td><td>马来西..</td><td>20170531</td><td>1</td><td></td></tr>
										<tr><td>DNY52923</td><td>泰国三..</td><td>20170531</td><td>1</td><td></td></tr>
										<tr><td>DNY52924</td><td>巴厘岛..</td><td>20170531</td><td>1</td><td></td></tr>

									</tbody>
								</table>
								<div class="page">
									<ul class="pagination" id="pagination">
										<li class="active"><a title="当前是第 1 页">1</a></li>
										<li><a title="到 2 页">2</a></li>
										<li><a title="到 3 页">3</a></li>
										<li><a title="到 4 页">4</a></li>
										<li><a title="到 5页">5</a></li>
										<li><a title="下一页">&gt;</a></li>
										<li><a title="尾页">&gt;&gt;</a></li>
									</ul>
								</div>
							</div>
						</section>
				</div>
			</div>
		</div>
		<!--导游语种比例-->
		<div class="row-2 tab padtop">
			<div class="module module-bot padnei plot-footer">
				<header>
					<div class="btn-title">
						<div class="btn">
						<i class="icon iconfont">&#xe615;</i>团队成员
						</div>
					</div>
				</header>
				<section class="vertical" style="margin-top:20px">
							<div class="man">
								<table class="table table-border">
									<thead>
										<tr>
											<th>姓名</th>
											<th>性别</th>
											<th>年龄</th>
										</tr>
									</thead>
									<tbody>
										<tr><td>张小三</td><td>男</td><td>28</td></tr>
										<tr><td>张小三</td><td>男</td><td>28</td></tr>
										<tr><td>张小三</td><td>男</td><td>28</td></tr>
										<tr><td>张小三</td><td>男</td><td>28</td></tr>
										<tr><td>张小三</td><td>男</td><td>28</td></tr>
										<tr><td>张小三</td><td>男</td><td>28</td></tr>
									</tbody>
								</table>
								<div class="page">
									<ul class="pagination" id="pagination">
										<li class="active"><a title="当前是第 1 页">1</a></li>
										<li><a title="到 2 页">2</a></li>
										<li><a title="到 3 页">3</a></li>
										<li><a title="到 4 页">4</a></li>
										<li><a title="到 5页">5</a></li>
										<li><a title="下一页">&gt;</a></li>
										<li><a title="尾页">&gt;&gt;</a></li>
									</ul>
								</div>
							</div>
						</section>
			</div>
		</div>
	</div>
</section>
<div class="layer information" style="display: none;">
	<div class="module module-light padnei">
		<div class="header" style="width:80%;">
			<div class="btn-title">
				<div class="btn">
					<i class="icon iconfont">&#xe639;</i>导游详细信息
				</div>
			</div>
		</div>
		<a href="javascript:;" class="close" style="position: absolute;right: 20px;top: 20px;"><i class="icon iconfont">&#xe638;</i></a>
		<div class="section" style="display: inline-block;width: 100%;height: 100%;">
			<table class="showtableCss1 dialog-table">
				<tr><td >导游证号</td><td>D-1100-339421</td><td >导游姓名</td><td>张晶晶</td><td rowspan="4"><img width="100%" src="../../resource/images/photo.png"></td></tr>
				<tr><td >性别</td><td>女</td><td >资格证号</td><td>DZG2013BJ10112</td></tr>
				<tr><td >登记证号</td><td>/</td><td >年审日期</td><td>2015.01.31</td></tr>
				<tr><td >分值</td><td>0</td><td >语种</td><td>普通话</td></tr>
				<tr><td >级别</td><td>初级</td><td >许可诊号</td><td colspan="2">S110001</td></tr>
				<tr><td >隶属旅行社</td><td >北京旅游人才服务中心</td><td>民族</td><td colspan="2">汉族</td></tr>
				<tr><td >学历</td><td>研究生</td><td >出生日期</td><td colspan="2">1982.10.31</td></tr>
			</table>
		</div>
	</div>
</div>
<script src="../../resource/script/lib/jquery-1.11.1.min.js"></script>
<script src="../../resource/script/lib/bootstrap-datetimepicker.js"></script>
<script src="../../resource/script/lib/bootstrap-datetimepicker.zh-CN.js"></script>
<!--echarts  -->
<script type="text/javascript" src="http://api.map.baidu.com/api?v=2.0&ak=ZUONbpqGBsYGXNIYHicvbAbM"></script>

<script src="../../resource/script/lib/echarts-2.2.7/echarts.js"></script>
<script src="../../resource/script/jquery.ux.public.js"></script>
<script src="../../resource/script/platform.utils.js"></script>
<script src="../../resource/script/lib/jquery.form.js"></script>
<script src="../../resource/script/lib/bootstrap.min.js"></script>
<script src="../../resource/script/lib/bootstrap-paginator.js"></script>
<script src="http://webapi.amap.com/maps?v=1.3&key=170937c95195a7dfe45e31ab5740d596"></script>
<script>
// 页面

	var operPage = {
		ajaxTools: null,
		year : null,
		month: null,
		tabGuideIndex : 0,
		tabScalIndex : 0,
		tabOraginalIndex : 0,
		pageSize : 8,
		init: function () {
			
			// 初始化页面
			this.initPage();
			// 加载报表 - 同时需要加载第一时间展示的报表
			initEcharts.apply(this, ['loadInitChartServ',{types:['bar', 'line', 'pie','map']}]);
		},
		//初始化页面
		initPage: function () {
			
			$("#details").click(function(){
				$(".layer").attr("style","");
			});
			$(".close").on('click',function(){
				$(this).parents('.layer').attr("style","display:none");
			})
				var that=this;
			//当月团队规模
			$("#toiletBuildListId > tr").click(function(){
				$(".showtableCss").attr("style","");
				$("#tablebianhao").text($(this).find("td").eq(0).text());
				$("#tablename").text($(this).find("td").eq(1).text());
				$("#tabletype").text($(this).find("td").eq(2).text());
				$("#tabletime").text($(this).find("td").eq(3).text());
				
				var index=$(this).index();
				
				var icon;
				if(index==0){
					var lnglat=["113.373675","38.212332"];
					icon = '../../resource/images/mark_r.png'
				}
				if(index==1){
					var lnglat=["113.616375","36.64079"];
					icon = '../../resource/images/mark_r.png'
				}
				if(index==2){
					var lnglat=["112.183466","37.204233"];
					icon = '../../resource/images/mark_r.png'
				}
				if(index==3){
					var lnglat=["112.583295","37.910688"];
					icon = '../../resource/images/mark_r.png'
				}
				if(index==4){
					var lnglat=["113.140864","40.026548"];
					icon = '../../resource/images/mark_r.png'
				}
				if(index==5){
					var lnglat=["113.593280","39.003311"];
					icon = '../../resource/images/mark_r.png'
				}
				that.showMap(lnglat,icon);
			})
			var teamServs = ['loadTeamMonth', 'loadTeamNumYear'];
			var teamChart = 'monthTeamNumId';
			$('#teamBtnId .btn').on('click',function(){
				$(this).addClass('active').siblings().removeClass('active');
				var index = $(this).index();
				that.tabScalIndex=index;
				$('#teamTitleId').html($(this).text());
				that[teamServs[index]](teamChart);
			});
			//行程时间和团队规模
			var teamScalServs = ['loadTeamTimeScal', 'loadTeamOrginal'];
			var teamScalChart = 'teamScalId';
			$('#teamScalBtnId .btn').on('click',function(){
				$(this).addClass('active').siblings().removeClass('active');
				var index = $(this).index();
				that.tabOraginalIndex=index;
				$('#teamScalTitleId').html($(this).text());
				that[teamScalServs[index]](teamScalChart);
			});
			//导游
			var guideServs = ['loadGuidePercent', 'loadGuideLanguagePercent'];
			var guideChart = 'guideId';
			$('#guideBtnId .btn').on('click',function(){
				$(this).addClass('active').siblings().removeClass('active');
				var index = $(this).index();
				that.tabGuideIndex=index;
				$('#guideTitleId').html($(this).text());
				that[guideServs[index]](guideChart);
			});
			this.initMap();
			
			this.outOfBoundTravel();
		},
		showMap : function(lnglat,icon){
			this.mapFaca.clearMap().setCenter(lnglat);
			
			var data=[{"address":"江苏省南京市秦淮区夫子庙街道武定门公园","businessHours":"9:00-17:00","level":"非A级","lnglat":["113.373675","38.212332"],"logo":"upload/images/IS20150101000000000001/20161102/67451478055215386.jpg","name":"蒙山大佛旅游区","principalName":"","principalPhone":"","type":"人文遗产"},{"address":"南京市秦淮区金陵路1号","businessHours":"暂未开放","level":"5A级","lnglat":["113.616375","36.64079"],"logo":"upload/images/IS20150101000000000001/20161102/32311478055706927.jpg","name":"白云寺(南十方街)","principalName":"","principalPhone":"","type":"人文遗产"},{"address":"秦淮河边的东关头","businessHours":"9:00-21:30","level":"非A级","lnglat":["112.183466","37.204233"],"logo":"upload/images/IS20150101000000000001/20161102/35741478057045416.jpg","name":"东湖醋园","principalName":"","principalPhone":"","type":"人文遗产"},{"address":"御道街外五龙桥南明御河西畔","businessHours":"全天","level":"非A级","lnglat":["112.583295","37.910688"],"logo":"upload/images/IS20150101000000000001/20161102/47641478064960104.jpg","name":"太原动物园","principalName":"","principalPhone":"","type":"人文遗产"},{"address":"御道街外五龙桥南明御河西畔","businessHours":"全天","level":"非A级","lnglat":["113.140864","40.026548"],"logo":"upload/images/IS20150101000000000001/20161102/47641478064960104.jpg","name":"太原动物园","principalName":"","principalPhone":"","type":"人文遗产"},{"address":"御道街外五龙桥南明御河西畔","businessHours":"全天","level":"非A级","lnglat":["113.593280","39.003311"],"logo":"upload/images/IS20150101000000000001/20161102/47641478064960104.jpg","name":"太原动物园","principalName":"","principalPhone":"","type":"人文遗产"}];
			var offset = [-13, -36];
				for (var i = 0, l = data.length; i < l; i += 1) {
					var val = data[i] || {};
					if(val.lnglat[0]!=lnglat[0]||val.lnglat[1]!=lnglat[1]){
						icon='../../resource/images/mark_bs.png';
					}else{
						icon = '../../resource/images/mark_r.png'
					}
					var content=getInfoWindownContent(val);
					
					this.mapFaca.addMarker({
						icon : icon,
						offset: offset,
						lnglat: val.lnglat,
						content: content,
						isSetCenter:'1'//用于区分信息窗体出现后是否设置中心点0：否 1：是
					});
			}
			this.mapFaca.setFitView();
						
		},
		// 初始化地图
		initMap: function () {
			if (!this.mapFaca) {
				var container = 'mapContainer';
				var center = PLATFORM_CONSTANS.AREA.getArea()['lnglat'];
				this.mapFaca = initMap(container, center);
				this.mapFaca.setMapStyle("normal");
			}
		},
		//验证是否为空
		isObjNull : function(val){
				if (val != undefined && val != null && val != '') {
			       return true;
				}else{
				   return false;
				}
		},
		outOfBoundTravel : function(){
			this.mapFaca.clearMap();
			var data=[{"address":"江苏省南京市秦淮区夫子庙街道武定门公园","businessHours":"9:00-17:00","level":"非A级","lnglat":["113.373675","38.212332"],"logo":"upload/images/IS20150101000000000001/20161102/67451478055215386.jpg","name":"蒙山大佛旅游区","principalName":"","principalPhone":"","type":"人文遗产"},{"address":"南京市秦淮区金陵路1号","businessHours":"暂未开放","level":"5A级","lnglat":["113.616375","36.64079"],"logo":"upload/images/IS20150101000000000001/20161102/32311478055706927.jpg","name":"白云寺(南十方街)","principalName":"","principalPhone":"","type":"人文遗产"},{"address":"秦淮河边的东关头","businessHours":"9:00-21:30","level":"非A级","lnglat":["112.183466","37.204233"],"logo":"upload/images/IS20150101000000000001/20161102/35741478057045416.jpg","name":"东湖醋园","principalName":"","principalPhone":"","type":"人文遗产"},{"address":"御道街外五龙桥南明御河西畔","businessHours":"全天","level":"非A级","lnglat":["112.583295","37.910688"],"logo":"upload/images/IS20150101000000000001/20161102/47641478064960104.jpg","name":"太原动物园","principalName":"","principalPhone":"","type":"人文遗产"},{"address":"御道街外五龙桥南明御河西畔","businessHours":"全天","level":"非A级","lnglat":["113.140864","40.026548"],"logo":"upload/images/IS20150101000000000001/20161102/47641478064960104.jpg","name":"太原动物园","principalName":"","principalPhone":"","type":"人文遗产"},{"address":"御道街外五龙桥南明御河西畔","businessHours":"全天","level":"非A级","lnglat":["113.593280","39.003311"],"logo":"upload/images/IS20150101000000000001/20161102/47641478064960104.jpg","name":"太原动物园","principalName":"","principalPhone":"","type":"人文遗产"}];
			var offset = [-13, -36];
							for (var i = 0, l = data.length; i < l; i += 1) {
								var val = data[i] || {};
								if (this.isObjNull(val.lnglat[0])&&this.isObjNull(val.lnglat[1])) {
									var content=getInfoWindownContent(val);
									
									this.mapFaca.addMarker({
										offset: offset,
										lnglat: val.lnglat,
										content: content,
										isSetCenter:'1'//用于区分信息窗体出现后是否设置中心点0：否 1：是
									});
								}
							}
							this.mapFaca.setFitView();
						
		},
		// 加载第一时间展示的报表
		loadInitChartServ: function () {
// 			this.loadTeamMonth ('monthTeamNumId'); //当月团队规模TOP
			//this.loadTourHotMap ('touristHotMapId');//客源地图
			this.loadTeamTimeScal ('teamScalId'); //行程时间和团队规模
// 			this.travelOutCountry('teamAreaContent');
			this.loadGuidePercent ('guideId');//导游学历比例
			this.loadTeamList(1);//团队列表
			$("#touristHotMapId :eq(0)").attr("height","100%");
		},
		loadSelectCharts : function(){
			var that=this;
			if(that.tabScalIndex==0){
				that.loadTeamMonth ('monthTeamNumId'); //规模TOP
			}else{
				that.loadTeamNumYear('monthTeamNumId');
			}
			if(that.tabOraginalIndex==0){
				that.loadTeamTimeScal ('teamScalId'); //行程时间和团队规模
			}else{
				that.loadTeamOrginal('teamScalId');
			}
			if(that.tabGuideIndex==0){
				that.loadGuidePercent ('guideId');//导游学历比例
			}else{
				that.loadGuideLanguagePercent('guideId');
			}
			this.loadTourHotMap ('touristHotMapId');//客源地图
			this.loadTeamList(1);
		},
		//当月团队规模TOP
		loadTeamMonth  : function(charElem){
			var	chart = getChartInstance.apply(this, [charElem]);
			var data={"data":[2185,2224,2076,421,207,215,103],"name":[]};
			chartPage.showTeamMonth(chart,data);
					
		
		},
		//年底接待团数
		loadTeamNumYear  : function(charElem){
			var	chart = getChartInstance.apply(this, [charElem]);
			var data={"nowYearDate":[351,323,292,361,359],"prevYearDate":[283,261,239,240,303,440,370,303,551,662,259,228],"year":["2017年","2016年"]};
			chartPage.showTeamNumYear(chart,data);
			
		},
		//客源地
		loadTourHotMap : function(charElem){
			var	chart = getChartInstance.apply(this, [charElem]);
			chartPage.showTourHotMap(chart);
			var data={"hotNum":19,"line":[[{"name":"北京","value":10},{"name":"山西"}],[{"name":"日本","value":9},{"name":"山西"}]],"point":[{"name":"北京市","value":10},{"name":"四川","value":12}]};
			chartPage.showTourHotMap(chart,data);

		},
		//行程时间和团队规模
		loadTeamTimeScal : function(charElem){
			var	chart = getChartInstance.apply(this, [charElem]);
			var data={"data":[2,1,3,2,3,4,1,2,5,3,6],"name":[]};
			chartPage.showTeamTimeScal(chart,data);
				
		},
		
		//出国游
		travelOutCountry : function(charElem){
			var	chart = getChartInstance.apply(this, [charElem]);
			var data={"data":[2,1,3,2,3],"name":[]};
			chartPage.showTravelOutCountry(chart,data);
				
		},
		//团队客源地TOP
		loadTeamOrginal  : function(charElem){
			var	chart = getChartInstance.apply(this, [charElem]);
			var data={"data":[{"name":"北京市","value":100}],"name":["北京市"]};
			chartPage.showTeamOrginal(chart,data);
			
		},
		//导游学历比例
		loadGuidePercent : function(charElem){
			var	chart = getChartInstance.apply(this, [charElem]);
			//使用时打开
			var data={"data":[{"name":"硕士","value":1},{"name":"本科","value":3},{"name":"专科","value":2}],"name":["硕士","本科","专科"]};
			chartPage.showGuidePercent(chart,data);
				
		},
		//导游语种比例
		loadGuideLanguagePercent : function(charElem){
			var	chart = getChartInstance.apply(this, [charElem]);
			//使用时打开
			var data={"data":[{"name":"普通话","value":4},{"name":"粤语","value":1},{"name":"英语","value":1}],"name":["普通话","粤语","英语"]};
			chartPage.showGuideLanguagePercent(chart,data);
					
		},
		//团队列表
		loadTeamList : function(pageNo){
			//使用时打开
				
			
						var data=[];
						var total=10;
						var reslutHtml="";
						if(total>0){
							$.each(data,function (i,val) {
								reslutHtml+="<tr><td>"+val.teamCode+"</td><td>"+val.lineName+"</td><td>"+val.guideName+"</td><td>"+val.receiveDate+"</td><td>"+val.days+"</td><td>"+val.plateNumber+"</td></tr>";
							});
							
							$("#teamListId").empty().append(reslutHtml);
							// 分页
							pagination('#pagination', total, this.pageSize, this, this.loadTeamList, pageNo);
						}else{
							for(var i=0;i<this.pageSize;i++){
								reslutHtml+="<tr><td>-</td><td>-</td><td>-</td><td>-</td><td>-</td><td>-</td></tr>";
							}
							$("#teamListId").empty().append(reslutHtml);
						}
// 					} else {
// 						for(var i=0;i<this.pageSize;i++){
// 							reslutHtml+="<tr><td>-</td><td>-</td><td>-</td><td>-</td><td>-</td><td>-</td></tr>";
// 						}
// 						$("#teamListId").empty().append(reslutHtml);
// 					}
			
		},
	};
	// 报表
	var chartPage = {
		//当月团队规模TOP
		showTeamMonth : function (chart, data) {
			var option = {
		        tooltip: {
		            trigger: 'axis',
		            axisPointer : {
		                type : 'shadow'
		            },
		        },
		        grid: {
		        	x: 40,
		        	y: 30,
		        	x2: 40,
		        	y2: 30
		        },
		        xAxis: [
		            {
		                type: 'category',
		                name: '规模人数',
		                data: ['0-10人','10-20人','20-30人','30-40人','40-50人','50-60人','70-80人']
		            }
		        ],
		        yAxis: [
		            {
		                type: 'value',
		                name: '团数'
		            }
		        ],
		        series: [
		            {
		                'name': '团数',
		                'type': 'bar',
		                barGap: '0%',
			            barWidth:14,
			            barCategoryGap:'50%',
		                'data': []
		            }
		        ]
		    };
		    if(data && data.data && data.data.length>0){
		    	option.series[0].data=data.data;
		    }
			echartsUtil.setOption(chart, option);
		},
		//年底接待团数
		showTeamNumYear : function (chart, data) {
			var monthDate=PLATFORM_CONSTANS.DATE.getMonths();
			var option = {
		        tooltip: {
		            trigger: 'axis',
		            axisPointer : {
		                type : 'shadow'
		            },
		            formatter: '{b}月 : {c}(团)'
		        },
		        grid: {
		        	x: 40,
		        	y: 30,
		        	x2: 40,
		        	y2: 30
		        },
		        legend: {
		            data: []
		        },
		        xAxis: [
		            {
		                type: 'category',
		                name: '月',
		                data: monthDate
		            }
		        ],
		        yAxis: [
		            {
		                type: 'value',
		                name: '团数'
		            }
		        ],
		        series: [
		            {
		                'name': '',
		                'type': 'line',
		                'data': []
		            },
		            {
		                'name': '',
		                'type': 'line',
		                'data': []
		            }
		        ]
		    };
		    if(data.nowYearDate.length>0 || data.prevYearDate.length>0){
		    	option.legend.data=data.year;
		    	option.series[0].name=data.year[0];
		    	option.series[0].data=data.nowYearDate;
		    	option.series[1].name=data.year[1];
		    	option.series[1].data=data.prevYearDate;
		    }
			echartsUtil.setOption(chart, option);
		},
		//客源地
		showTourHotMap : function(chart,data){
			var option = {
			    backgroundColor: '#19467d',
			    color: ['gold','aqua','lime'],
			    title : {
			        text: '秦淮区：0团',
			        subtext: '',
			        x: 'center',
			        y: '80',
			        textStyle: {
			            color: '#fff',
			            fontSize: 30
			        },
			        subtextStyle: {
			        	fontSize: 20
			        },
			        itemGap: 20
			    },
			    tooltip : {
			        trigger: 'item',
			        formatter : '{b}:{c}团'
			    },
				    legend: {
				        orient: 'vertical',
				        x:'right',
				        y:'bottom',
				        data:['武汉'],
				        selectedMode: 'single',
				        selected:{
				        }
				    },
			     dataRange: {
				        min : 0,
				        max : 100000,
				        y: '60%',
				        calculable : true,
				        color: ['#ff3333', 'orange', 'yellow','lime','aqua']
				    },
			    series : [
			        {
			            name: '全国',
			            type: 'map',
			            roam: true,
			            hoverable: false,
			            mapType: 'china',
			            itemStyle:{
			                normal:{
			                	label: {
			                		show: true,
				                    textStyle: {
				                        //color: '#fff'
				                        color: '#8B4513'
				                    }
				                },
			                    borderColor:'rgba(100,149,237,1)',
			                    borderWidth:0.5,
			                    areaStyle:{
			                        color: '#d9d9d9'
			                    }
			                },
			                emphasis: {label: {show: true}}
			            },
			            data:[],
			            markLine : {
			                smooth:true,
			                symbol: ['none', 'circle'],  
			                symbolSize : 1,
			                itemStyle : {
			                    normal: {
			                        color:'#fff',
			                        borderWidth:1,
			                        borderColor:'rgba(30,144,255,0.5)'
			                    }
			                },
			                data : []
			            },
			            geoCoord: echartsUtil.getGeoCoord()
			        },
			        {
			            name: '山西',
			            type: 'map',
			            mapType: 'china',
			            data:[],
			            markLine : {
			                smooth:true,
			                effect : {
			                    show: true,
			                    scaleSize: 1,
			                    period: 30,
			                    color: '#fff',
			                    shadowBlur: 10
			                },
			                itemStyle : {
			                    normal: {
			                        borderWidth:1,
			                        lineStyle: {
			                            type: 'solid',
			                            shadowBlur: 10
			                        }
			                    },
			                    
			                },
			                data : []
			            },
			            markPoint : {
			                symbol:'emptyCircle',
			                symbolSize : function (v){
			                    return 10 + v/100
			                },
			                effect : {
			                    show: true,
			                    shadowBlur : 0
			                },
			                itemStyle:{
			                    normal:{
			                        label:{show:false}
			                    },
			                    emphasis: {
			                        label:{position:'top'}
			                    }
			                },
			                data : []
			            }
			        }
			    ]
			};
			
			if(data && data.point && data.point.length>0){
			
				option.title.text = "山西："+data.hotNum+"团";
				option.series[1].markLine.data = data.line;
				option.series[1].markPoint.data = data.point;
			}
			echartsUtil.setOption(chart, option);
		},
		//行程时间和团队规模
		showTeamTimeScal  : function (chart, data) {
			var option = {
		        tooltip: {
		            trigger: 'axis',
		            axisPointer : {
		                type : 'shadow'
		            },
		        },
		        grid: {
		        	x: 40,
		        	y: 40,
		        },
		        xAxis: [
		            {
		                type: 'category',
		                name: '天',
		                data: ["社A","社B","社C","社D","社E","社F","社G","H","I","J","旅行社"]
		            }
		        ],
		        yAxis: [
		            {
		                type: 'value',
		                name: '人数'
		            }
		        ],
		        series: [
		            {
		                'name': '团队规模',
		                'type': 'bar',
		                'data': []
		            }
		        ]
		    };
		    if(data && data.data && data.data.length>0){
		    	option.series[0].data=data.data;
		    }
			echartsUtil.setOption(chart, option);
		},
		//出国游
		showTravelOutCountry  : function (chart, data) {
			var option = {
		        tooltip: {
		            trigger: 'axis',
		            axisPointer : {
		                type : 'shadow'
		            },
		        },
		        grid: {
		        	x: 40,
		        	y: 40,
		        },
		        xAxis: [
		            {
		                type: 'category',
		                name: '天',
		                data: ["日本","韩国","新马泰","越南","其他国家"]
		            }
		        ],
		        yAxis: [
		            {
		                type: 'value',
		                name: '团数'
		            }
		        ],
		        series: [
		            {
		                'name': '国家',
		                'type': 'bar',
		                'data': []
		            }
		        ]
		    };
		    if(data && data.data && data.data.length>0){
		    	option.series[0].data=data.data;
		    }
			echartsUtil.setOption(chart, option);
		},
		//团队客源地TOP
		showTeamOrginal  : function (chart, data) {
			var option = {
			    tooltip : {
			        trigger: 'item',
			        formatter: "{a} <br/>{b} : {c} ({d}%)"
			    },
			    legend: {
			        orient : 'vertical',
			        x : 'right',
			        y : 'center',
			        data:[]
			    },
			    series : [
			        {
			            name:'客源地top',
			            type:'pie',
			            center:['40%','50%'],
			            radius : ['50%', '80%'],
			            itemStyle : {
			                normal : {
			                    label : {
			                        show : true,
			                        formatter:"{d}%"
			                    },
			                    labelLine : {
			                        show : true
			                    }
			                },
			                emphasis : {
			                    label : {
			                        show : true,
			                        position : 'center',
			                        textStyle : {
			                            fontSize : '30',
			                            fontWeight : 'bold'
			                        }
			                    }
			                }
			            },
			            data:[]
			        }
			    ]
			};
			if(data && data.name && data.name.length>0){
				option.legend.data=data.name;
				option.series[0].data=data.data;
			}
			echartsUtil.setOption(chart, option);
		},
		//导游学历比例
		showGuidePercent : function (chart, data) {
				option = {
				    tooltip : {
				        show: true,
				        formatter: "{a} <br/>{b} : {c} ({d}%)"
				    },
				    legend: {
				        orient : 'vertical',
				        x : 'right',
				        y : 'center',
				        data:[]
				    },
			    series : [
			        {
			            name:'导游学历',
			            type:'pie',
			            clockWise:true,
			            startAngle: 135,
			            center : ['35%', 134],
			            radius : [60, 110],
			            data:[],
			        }
			    ]
			};
			if(data && data.name && data.name.length>0){
				option.legend.data=data.name;
				option.series[0].data=data.data;
			}
			echartsUtil.setOption(chart, option);
		},
		//导游语种比例
		showGuideLanguagePercent : function (chart, data) {
			option = {
			    tooltip : {
			        trigger: 'item',
			        formatter: "{a} <br/>{b} : {c} ({d}%)"
			    },
			    legend: {
			        orient : 'vertical',
			        x : 'right',
			        y : 'center',
			        data:[]
			    },
			    series : [
			        {
			            name:'语种比例',
			            type:'pie',
			            center:['40%','50%'],
			            radius : ['30%', '65%'],
			            data:[]
			        }
			    ]
			};
			if(data && data.name && data.name.length>0){
				option.legend.data=data.name;
				option.series[0].data=data.data;
			}
			echartsUtil.setOption(chart, option);
		}
	};
	$(document).ready(function () {
		operPage.init();
		//日期插件
		$('.timeCss').datetimepicker({
	    	language:  'zh-CN',
	        todayBtn:  1,
			autoclose: 1,
			minView: "month", //选择日期后，不会再跳转去选择时分秒 
			todayHighlight: 1,
			startView: 2,
			forceParse: 0,
	        showMeridian: 1,
		    format: 'yyyymmdd'
		});
		
	});
</script>
</body>
</html>